@model MunicipalityManagementSystem.Models.Reports


@{
    ViewData["Title"] = "Edit Report";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit Report</h2>

<form asp-controller="Reports" asp-action="Edit" method="post">
    @Html.AntiForgeryToken()

    <input type="hidden" asp-for="ReportID" />

    <div class="form-group">
        <label>Citizen ID</label>
        <input asp-for="CitizenID" class="form-control" required />

        <span asp-validation-for="CitizenID" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label>Report Type</label>
        <input asp-for="ReportType" class="form-control" required />

        <span asp-validation-for="ReportType" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label>Details</label>
        <textarea asp-for="Details" class="form-control" required></textarea>

        <span asp-validation-for="Details" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label>Status</label>
        <select asp-for="Status" class="form-control">
            <option>Under Review</option>
            <option>Resolved</option>
        </select>

        <span asp-validation-for="Status" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Update</button>

    <a href="@Url.Action("Index", "Reports")" class="btn btn-secondary">Back to List</a>
</form>

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#editReportForm").submit(function (e) {
                e.preventDefault();

                $.ajax({
                    type: "POST",
                    url: "@Url.Action("Edit")",
                    data: $(this).serialize(),
                    success: function () {
                        alert("Report updated successfully!");
                        window.location.href = "@Url.Action("Index")";
                    },
                    error: function () {
                        alert("An error occurred while updating the report.");
                    }
                });
            });
        });
    </script>
}


