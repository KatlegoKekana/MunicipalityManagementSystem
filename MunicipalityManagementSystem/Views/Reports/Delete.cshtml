@model MunicipalityManagementSystem.Models.Reports


@{
    ViewData["Title"] = "Delete Report";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Delete Report</h2>
<h3 class="text-danger">Are you sure you want to delete this report?</h3>

<div>
    <p><strong>Report ID:</strong> @Model.ReportID</p>
    <p><strong>Citizen ID:</strong> @Model.CitizenID</p>
    <p><strong>Report Type:</strong> @Model.ReportType</p>
    <p><strong>Details:</strong> @Model.Details</p>
    <p><strong>Submission Date:</strong> @Model.SubmissionDate.ToString("yyyy-MM-dd")</p>
    <p><strong>Status:</strong> @Model.Status</p>

    <form asp-controller="Reports" asp-action="DeleteConfirmed" method="post">
        @Html.AntiForgeryToken()

        <input type="hidden" asp-for="ReportID" />

        <button type="submit" class="btn btn-danger">Delete</button>

        <a href="@Url.Action("Index", "Reports")" class="btn btn-secondary">Cancel</a>
    </form>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#confirmDeleteReport").click(function () {
                if (confirm("Are you sure you want to delete this report?")) {
                    $.ajax({
                        type: "POST",
                        url: "@Url.Action("DeleteConfirmed", new { id = Model.ReportID })",
                        success: function () {
                            alert("Report deleted successfully!");
                            window.location.href = "@Url.Action("Index")";
                        },
                        error: function () {
                            alert("An error occurred while deleting the report.");
                        }
                    });
                }
            });
        });
    </script>
}