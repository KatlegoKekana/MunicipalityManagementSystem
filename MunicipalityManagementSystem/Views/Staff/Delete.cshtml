@model MunicipalityManagementSystem.Models.StaffManagement


@{
    ViewData["Title"] = "Delete Staff";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Delete Staff</h2>
<h3 class="text-danger">Are you sure you want to delete this staff member?</h3>

<div>
    <p><strong>Full Name:</strong> @Model.FullName</p>
    <p><strong>Position:</strong> @Model.Position</p>
    <p><strong>Department:</strong> @Model.Department</p>
    <p><strong>Email:</strong> @Model.Email</p>
    <p><strong>Phone Number:</strong> @Model.PhoneNumber</p>
    <p><strong>Hire Date:</strong> @Model.HireDate.ToString("yyyy-MM-dd")</p>

    <form asp-controller="Staff" asp-action="DeleteConfirmed" method="post">
        @Html.AntiForgeryToken()

        <input type="hidden" asp-for="StaffID" />

        <button type="submit" class="btn btn-danger">Delete</button>

        <a href="@Url.Action("Index", "Staff")" class="btn btn-secondary">Cancel</a>
    </form>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#confirmDelete").click(function () {
                if (confirm("Are you sure you want to delete this staff member?")) {
                    $.ajax({
                        type: "POST",
                        url: "@Url.Action("DeleteConfirmed", new { id = Model.StaffID })",
                        success: function () {
                            alert("Staff deleted successfully!");
                            window.location.href = "@Url.Action("Index")";
                        },
                        error: function () {
                            alert("An error occurred while deleting the staff.");
                        }
                    });
                }
            });
        });
    </script>
}
